-- Build Your Escape GUI Script
-- Made by bro_broa

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Create main screen GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "BuildYourEscapeGUI"
screenGui.Parent = playerGui
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Create main frame (draggable)
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 300, 0, 250)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -125)
mainFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui

-- Add corner rounding
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = mainFrame

-- Add drop shadow
local shadow = Instance.new("ImageLabel")
shadow.Name = "Shadow"
shadow.Image = "rbxassetid://5554236805"
shadow.ScaleType = Enum.ScaleType.Slice
shadow.SliceCenter = Rect.new(23, 23, 277, 277)
shadow.Size = UDim2.new(1, 30, 1, 30)
shadow.Position = UDim2.new(0, -15, 0, -15)
shadow.BackgroundTransparency = 1
shadow.ZIndex = -1
shadow.Parent = mainFrame

-- Title bar
local titleBar = Instance.new("Frame")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1, 0, 0, 30)
titleBar.Position = UDim2.new(0, 0, 0, 0)
titleBar.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
titleBar.BorderSizePixel = 0
titleBar.Parent = mainFrame

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 8)
titleCorner.Parent = titleBar

-- GUI title
local title = Instance.new("TextLabel")
title.Name = "Title"
title.Size = UDim2.new(0.7, 0, 1, 0)
title.Position = UDim2.new(0.05, 0, 0, 0)
title.BackgroundTransparency = 1
title.Text = "Build your escape script | made by bro_broa"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextXAlignment = Enum.TextXAlignment.Left
title.Font = Enum.Font.GothamBold
title.TextSize = 14
title.Parent = titleBar

-- Close button
local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Size = UDim2.new(0, 30, 0, 30)
closeButton.Position = UDim2.new(1, -30, 0, 0)
closeButton.BackgroundColor3 = Color3.fromRGB(232, 72, 85)
closeButton.BorderSizePixel = 0
closeButton.Text = "X"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.Font = Enum.Font.GothamBold
closeButton.TextSize = 14
closeButton.Parent = titleBar

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 8)
closeCorner.Parent = closeButton

-- Content area
local content = Instance.new("Frame")
content.Name = "Content"
content.Size = UDim2.new(1, -20, 1, -50)
content.Position = UDim2.new(0, 10, 0, 40)
content.BackgroundTransparency = 1
content.Parent = mainFrame

-- Inf trap toggle
local toggleFrame = Instance.new("Frame")
toggleFrame.Name = "ToggleFrame"
toggleFrame.Size = UDim2.new(1, 0, 0, 40)
toggleFrame.Position = UDim2.new(0, 0, 0, 0)
toggleFrame.BackgroundTransparency = 1
toggleFrame.Parent = content

local toggleLabel = Instance.new("TextLabel")
toggleLabel.Name = "ToggleLabel"
toggleLabel.Size = UDim2.new(0.6, 0, 1, 0)
toggleLabel.Position = UDim2.new(0, 0, 0, 0)
toggleLabel.BackgroundTransparency = 1
toggleLabel.Text = "Inf trap"
toggleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleLabel.TextXAlignment = Enum.TextXAlignment.Left
toggleLabel.Font = Enum.Font.Gotham
toggleLabel.TextSize = 16
toggleLabel.Parent = toggleFrame

local toggleButton = Instance.new("TextButton")
toggleButton.Name = "ToggleButton"
toggleButton.Size = UDim2.new(0, 50, 0, 25)
toggleButton.Position = UDim2.new(1, -50, 0.5, -12.5)
toggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
toggleButton.BorderSizePixel = 0
toggleButton.Text = ""
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.Font = Enum.Font.GothamBold
toggleButton.TextSize = 14
toggleButton.Parent = toggleFrame

local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0, 12)
toggleCorner.Parent = toggleButton

local toggleFill = Instance.new("Frame")
toggleFill.Name = "ToggleFill"
toggleFill.Size = UDim2.new(0, 23, 0, 23)
toggleFill.Position = UDim2.new(0, 2, 0, 1)
toggleFill.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
toggleFill.BorderSizePixel = 0
toggleFill.Parent = toggleButton

local toggleFillCorner = Instance.new("UICorner")
toggleFillCorner.CornerRadius = UDim.new(0, 12)
toggleFillCorner.Parent = toggleFill

-- Install Win button
local installButton = Instance.new("TextButton")
installButton.Name = "InstallButton"
installButton.Size = UDim2.new(1, 0, 0, 40)
installButton.Position = UDim2.new(0, 0, 0, 60)
installButton.BackgroundColor3 = Color3.fromRGB(97, 205, 187)
installButton.BorderSizePixel = 0
installButton.Text = "install win"
installButton.TextColor3 = Color3.fromRGB(255, 255, 255)
installButton.Font = Enum.Font.GothamBold
installButton.TextSize = 16
installButton.Parent = content

local installCorner = Instance.new("UICorner")
installCorner.CornerRadius = UDim.new(0, 8)
installCorner.Parent = installButton

-- Status label
local statusLabel = Instance.new("TextLabel")
statusLabel.Name = "StatusLabel"
statusLabel.Size = UDim2.new(1, 0, 0, 20)
statusLabel.Position = UDim2.new(0, 0, 0, 120)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "Status: Ready"
statusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
statusLabel.TextXAlignment = Enum.TextXAlignment.Left
statusLabel.Font = Enum.Font.Gotham
statusLabel.TextSize = 14
statusLabel.Parent = content

-- Variables
local isToggled = false
local farmLoop = nil

-- Function to toggle Inf trap
local function toggleInfTrap()
    isToggled = not isToggled
    
    if isToggled then
        -- Turn ON
        toggleButton.Text = ""
        toggleButton.BackgroundColor3 = Color3.fromRGB(97, 205, 187)
        toggleFill.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        toggleFill.Position = UDim2.new(1, -25, 0, 1)
        statusLabel.Text = "Status: Inf Trap Enabled"
        
        -- Start the farm loop
        getgenv().farm = true
        
        if farmLoop then
            farmLoop:Disconnect()
        end
        
        farmLoop = game:GetService("RunService").Heartbeat:Connect(function()
            if getgenv().farm then
                local args = {"Trap"}
                game:GetService("ReplicatedStorage"):WaitForChild("ActivateGear"):FireServer(unpack(args))
            end
        end)
    else
        -- Turn OFF
        toggleButton.Text = ""
        toggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
        toggleFill.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
        toggleFill.Position = UDim2.new(0, 2, 0, 1)
        statusLabel.Text = "Status: Inf Trap Disabled"
        
        -- Stop the farm loop
        getgenv().farm = false
        
        if farmLoop then
            farmLoop:Disconnect()
            farmLoop = nil
        end
    end
end

-- Function to teleport to EscapeArea
local function teleportToEscapeArea()
    statusLabel.Text = "Status: Searching for EscapeArea..."
    
    -- Find the EscapeArea part
    local escapeArea = workspace:FindFirstChild("EscapeArea")
    
    if escapeArea then
        -- Teleport player to the EscapeArea
        player.Character:SetPrimaryPartCFrame(escapeArea.CFrame + Vector3.new(0, 5, 0))
        statusLabel.Text = "Status: Teleported to EscapeArea!"
    else
        statusLabel.Text = "Status: EscapeArea not found!"
    end
end

-- Function to close the GUI
local function closeGUI()
    screenGui:Destroy()
end

-- Connect events
toggleButton.MouseButton1Click:Connect(toggleInfTrap)
installButton.MouseButton1Click:Connect(teleportToEscapeArea)
closeButton.MouseButton1Click:Connect(closeGUI)

-- Add smooth animations
toggleButton.MouseEnter:Connect(function()
    if isToggled then
        game:GetService("TweenService"):Create(toggleButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(87, 185, 168)}):Play()
    else
        game:GetService("TweenService"):Create(toggleButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(100, 100, 100)}):Play()
    end
end)

toggleButton.MouseLeave:Connect(function()
    if isToggled then
        game:GetService("TweenService"):Create(toggleButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(97, 205, 187)}):Play()
    else
        game:GetService("TweenService"):Create(toggleButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(80, 80, 80)}):Play()
    end
end)

installButton.MouseEnter:Connect(function()
    game:GetService("TweenService"):Create(installButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(87, 185, 168)}):Play()
end)

installButton.MouseLeave:Connect(function()
    game:GetService("TweenService"):Create(installButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(97, 205, 187)}):Play()
end)

closeButton.MouseEnter:Connect(function()
    game:GetService("TweenService"):Create(closeButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(210, 60, 70)}):Play()
end)

closeButton.MouseLeave:Connect(function()
    game:GetService("TweenService"):Create(closeButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(232, 72, 85)}):Play()
end)
